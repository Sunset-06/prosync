<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prosync</title>
    <link rel="stylesheet" type="text/css" href="signup.css">
</head>
<body>
    <div class="container">
        <h1>Sign Up</h1>
        <div class="form-box">
            <form onsubmit="return false;">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password"required>
                    <label for="re-enter password">Re-enter Password</label>
                    <input type="password" id="repassword" name="repassword" required>
                    <label for="leetcodeid">Leetcode Username</label>
                    <input type="text" id="leetcodeid" name="leetcodeid" required>

                <button onclick="signup()">Sign-Up</button>
                <p id="message"></p>
        </form>
        </div>
        <p class="redirect">Already have an Account? <a href="./signin.html">Sign In!</a></p>
    </div>
    <script type="text/javascript" src="/eel.js"></script>
    <script type="text/javascript">
        function signup() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var repassword = document.getElementById("repassword").value;
            var leetcodeid = document.getElementById("leetcodeid").value;
            if(password!=repassword) {
                alert("Passwords don't match");
                return;
            }

            eel.signup(username, password, leetcodeid)(function(result) {
                if (result) {
                    document.getElementById("message").innerHTML = "Sign Up successful!";
                    eel.redirect_to_home();
                } else {
                    document.getElementById("message").innerHTML = "Profile already exists!";
                }
            });
        }
    </script>
</body>
</html>